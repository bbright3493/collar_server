#collar_server
#宠物项圈定位系统（服务端）

##协议数据分析：

###一、心跳包
上行数据：  
S168#861118010019063#043b#0006#SYNC:0$  
ID号：S168  
IMEI：861118010019063  
流水号：043b  
长度：0006  
协议类型：SYNC （心跳包）  
心跳次数：0 （从000到fff）  
结束符：$  

下行数据:  
S168#000000000000000#流水号#长度#ACK^SYNC,utc时间(yyyymmddhhmmss)
说明:开机时登录时发送该协议，而后每隔4分30秒发送一次,首次使用时才会存在',utc时间'

###二、定位数据包
上行数据：
基站定位数据包：
S168#861118010019063#0002#007d#LOCA:L;CELL:3,1cc,0,8219,51f7,b,8219,ad86,9,8219,5cb,6;GDATA:V,0,160502222513,0.000000,0.000000,0,0,0;ALERT:0000;STATUS:57,48$  
S168#861118010019063#0002#0072#LOCA:L;CELL:2,1cc,0,8219,51f7,e,8219,ad86,a;GDATA:V,0,170506143424,0.000000,0.000000,0,0,0;ALERT:0000;STATUS:96,58$

gps定位数据包：
S168#861118010019063#002a#00af#LOCA:G;CELL:6,1cc,0,8109,ad2d,1a,8109,ad2c,23,8109,ad2f,1b,8109,ad30,19,8109,ad2b,10,8109,ad2e,d;GDATA:A,3,170329095506,30.551296,104.087959,10,27,449;ALERT:0000;STATUS:72,100$
ID号：S168
IMEI：861118010019063  
流水号：0002  
长度：007d  
协议类型：LOCA  
定位类型：L=基站定位,G=GPS定位,W=wifi定位  
基站信息：CELL  
GPS信息：GDATA  
报警信息：ALERT
状态信息：STATUS  
wifi信息：WIFI  
结束符：$  

下行数据：  
下行:
S168#000000000000000#流水号#长度#ACK^LOCA,参数  
说明：逗号参数部分是可选项,预留使用,目前是空  
例如:  
S168#000000000000008#0f12#00ba#LOCA:G;CELL:1,1cc,2,2795,1435,64;GDATA:A,12,160412154800,22.564025,113.242329,5.5,152,900;ALERT:0000;STATUS:89,98;
WIFI:3,1c-fa-68-13-a5-b4,-61,1c-fa-68-13-a5-b5,-78,1c-fa-68-13-a5-b6,-70$

大区编码1: 8219
小区编码1: 51f7
信号强度1: b
大区编码2: 8219
小区编码2: ad86
信号强度2: 9
大区编码3: 8219
小区编码3: 5cb
信号强度3: 6


大区编码1: 33305
小区编码1: 20983
信号强度1: 11
大区编码2: 33305
小区编码2: 44422
信号强度2: 9
大区编码3: 33305
小区编码3: 1483
信号强度3: 6

###三、agps包
S168#861118010019063#0001#0013#B2G:1cc,0,8109,8536$
上行:S168#000000000000000#流水号#长度#B2G:主基站信息
下行:S168#000000000000000#流水号#长度#ACK^B2G,坐标信息
说明,
主基站信息:国家编码,运营商编码,大区号,小区号
坐标信息:纬度,经度,南纬和西经使用负数表示